const teamData = {
  "teams": [
    /* East */
    {
      "id": "team_01",
      "region": "East",
      "seed": 1,
      "team_name": "UConn",
      "logo_url": "logos/uconn.svg"
    },
    {
      "id": "team_02",
      "region": "East",
      "seed": 16,
      "team_name": "Stetson",
      "logo_url": "logos/stetson.svg"
    },
    {
      "id": "team_03",
      "region": "East",
      "seed": 8,
      "team_name": "FAU",
      "logo_url": "logos/fla-atlantic.svg"
    },
    {
      "id": "team_04",
      "region": "East",
      "seed": 9,
      "team_name": "Northwestern",
      "logo_url": "logos/northwestern.svg"
    },
	{
      "id": "team_05",
      "region": "East",
      "seed": 5,
      "team_name": "San Diego St.",
      "logo_url": "logos/san-diego-st.svg"
    },
    {
      "id": "team_06",
      "region": "East",
      "seed": 12,
      "team_name": "UAB",
      "logo_url": "logos/uab.svg"
    },
    {
      "id": "team_07",
      "region": "East",
      "seed": 4,
      "team_name": "Auburn",
      "logo_url": "logos/auburn.svg"
    },
    {
      "id": "team_08",
      "region": "East",
      "seed": 13,
      "team_name": "Yale",
      "logo_url": "logos/yale.svg"
    },
	{
      "id": "team_09",
      "region": "East",
      "seed": 6,
      "team_name": "BYU",
      "logo_url": "logos/byu.svg"
    },
    {
      "id": "team_10",
      "region": "East",
      "seed": 11,
      "team_name": "Duquesne",
      "logo_url": "logos/duquesne.svg"
    },
    {
      "id": "team_11",
      "region": "East",
      "seed": 3,
      "team_name": "Illinois",
      "logo_url": "logos/illinois.svg"
    },
    {
      "id": "team_12",
      "region": "East",
      "seed": 14,
      "team_name": "Morehead St.",
      "logo_url": "logos/morehead-st.svg"
    },
	{
      "id": "team_13",
      "region": "East",
      "seed": 7,
      "team_name": "Washington St.",
      "logo_url": "logos/washington-st.svg"
    },
    {
      "id": "team_14",
      "region": "East",
      "seed": 10,
      "team_name": "Drake",
      "logo_url": "logos/drake.svg"
    },
    {
      "id": "team_15",
      "region": "East",
      "seed": 2,
      "team_name": "Iowa St.",
      "logo_url": "logos/iowa-st.svg"
    },
    {
      "id": "team_16",
      "region": "East",
      "seed": 15,
      "team_name": "S. Dakota St.",
      "logo_url": "logos/south-dakota-st.svg"
    },
	/* West */
    {
      "id": "team_17",
      "region": "West",
      "seed": 1,
      "team_name": "North Carolina",
      "logo_url": "logos/north-carolina.svg"
    },
    {
      "id": "team_18",
      "region": "West",
      "seed": 16,
      "team_name": "Wagner",
      "logo_url": "logos/wagner.svg"
    },
    {
      "id": "team_19",
      "region": "West",
      "seed": 8,
      "team_name": "Mississippi St.",
      "logo_url": "logos/mississippi-st.svg"
    },
    {
      "id": "team_20",
      "region": "West",
      "seed": 9,
      "team_name": "Michigan St.",
      "logo_url": "logos/michigan-st.svg"
    },
	{
      "id": "team_21",
      "region": "West",
      "seed": 5,
      "team_name": "St. Mary's",
      "logo_url": "logos/st-marys-ca.svg"
    },
    {
      "id": "team_22",
      "region": "West",
      "seed": 12,
      "team_name": "Grand Canyon",
      "logo_url": "logos/grand-canyon.svg"
    },
    {
      "id": "team_23",
      "region": "West",
      "seed": 4,
      "team_name": "Alabama",
      "logo_url": "logos/alabama.svg"
    },
    {
      "id": "team_24",
      "region": "West",
      "seed": 13,
      "team_name": "Charleston",
      "logo_url": "logos/col-of-charleston.svg"
    },
	{
      "id": "team_25",
      "region": "West",
      "seed": 6,
      "team_name": "Clemson",
      "logo_url": "logos/clemson.svg"
    },
    {
      "id": "team_26",
      "region": "West",
      "seed": 11,
      "team_name": "New Mexico",
      "logo_url": "logos/new-mexico.svg"
    },
    {
      "id": "team_27",
      "region": "West",
      "seed": 3,
      "team_name": "Baylor",
      "logo_url": "logos/baylor.svg"
    },
    {
      "id": "team_28",
      "region": "West",
      "seed": 14,
      "team_name": "Colgate",
      "logo_url": "logos/colgate.svg"
    },
	{
      "id": "team_29",
      "region": "West",
      "seed": 7,
      "team_name": "Dayton",
      "logo_url": "logos/dayton.svg"
    },
    {
      "id": "team_30",
      "region": "West",
      "seed": 10,
      "team_name": "Nevada",
      "logo_url": "logos/nevada.svg"
    },
    {
      "id": "team_31",
      "region": "West",
      "seed": 2,
      "team_name": "Arizona",
      "logo_url": "logos/arizona.svg"
    },
    {
      "id": "team_32",
      "region": "West",
      "seed": 15,
      "team_name": "Long Beach St.",
      "logo_url": "logos/long-beach-st.svg"
    },
	/* South */
	{
      "id": "team_33",
      "region": "South",
      "seed": 1,
      "team_name": "Houston",
      "logo_url": "logos/houston.svg"
    },
    {
      "id": "team_34",
      "region": "South",
      "seed": 16,
      "team_name": "Longwood",
      "logo_url": "logos/longwood.svg"
    },
    {
      "id": "team_35",
      "region": "South",
      "seed": 8,
      "team_name": "Nebraska",
      "logo_url": "logos/nebraska.svg"
    },
    {
      "id": "team_36",
      "region": "South",
      "seed": 9,
      "team_name": "Texas A&M",
      "logo_url": "logos/texas-am.svg"
    },
	{
      "id": "team_37",
      "region": "South",
      "seed": 5,
      "team_name": "Wisconsin",
      "logo_url": "logos/wisconsin.svg"
    },
    {
      "id": "team_38",
      "region": "South",
      "seed": 12,
      "team_name": "James Madison",
      "logo_url": "logos/james-madison.svg"
    },
    {
      "id": "team_39",
      "region": "South",
      "seed": 4,
      "team_name": "Duke",
      "logo_url": "logos/duke.svg"
    },
    {
      "id": "team_40",
      "region": "South",
      "seed": 13,
      "team_name": "Vermont",
      "logo_url": "logos/vermont.svg"
    },
	{
      "id": "team_41",
      "region": "South",
      "seed": 6,
      "team_name": "Texas Tech",
      "logo_url": "logos/texas-tech.svg"
    },
    {
      "id": "team_42",
      "region": "South",
      "seed": 11,
      "team_name": "NC State",
      "logo_url": "logos/north-carolina-st.svg"
    },
    {
      "id": "team_43",
      "region": "South",
      "seed": 3,
      "team_name": "Kentucky",
      "logo_url": "logos/kentucky.svg"
    },
    {
      "id": "team_44",
      "region": "South",
      "seed": 14,
      "team_name": "Oakland",
      "logo_url": "logos/oakland.svg"
    },
	{
      "id": "team_45",
      "region": "South",
      "seed": 7,
      "team_name": "Florida",
      "logo_url": "logos/florida.svg"
    },
    {
      "id": "team_46",
      "region": "South",
      "seed": 10,
      "team_name": "Colorado",
      "logo_url": "logos/colorado.svg"
    },
    {
      "id": "team_47",
      "region": "South",
      "seed": 2,
      "team_name": "Marquette",
      "logo_url": "logos/marquette.svg"
    },
    {
      "id": "team_48",
      "region": "South",
      "seed": 15,
      "team_name": "Western Ky.",
      "logo_url": "logos/western-ky.svg"
    },
	/* Midwest */
	{
      "id": "team_49",
      "region": "Midwest",
      "seed": 1,
      "team_name": "Purdue",
      "logo_url": "logos/purdue.svg"
    },
    {
      "id": "team_50",
      "region": "Midwest",
      "seed": 16,
      "team_name": "Grambling St.",
      "logo_url": "logos/grambling.svg"
    },
    {
      "id": "team_51",
      "region": "Midwest",
      "seed": 8,
      "team_name": "Utah St.",
      "logo_url": "logos/utah-st.svg"
    },
    {
      "id": "team_52",
      "region": "Midwest",
      "seed": 9,
      "team_name": "TCU",
      "logo_url": "logos/tcu.svg"
    },
	{
      "id": "team_53",
      "region": "Midwest",
      "seed": 5,
      "team_name": "Gonzaga",
      "logo_url": "logos/gonzaga.svg"
    },
    {
      "id": "team_54",
      "region": "Midwest",
      "seed": 12,
      "team_name": "McNeese",
      "logo_url": "logos/mcneese.svg"
    },
    {
      "id": "team_55",
      "region": "Midwest",
      "seed": 4,
      "team_name": "Kansas",
      "logo_url": "logos/kansas.svg"
    },
    {
      "id": "team_56",
      "region": "Midwest",
      "seed": 13,
      "team_name": "Samford",
      "logo_url": "logos/samford.svg"
    },
	{
      "id": "team_57",
      "region": "Midwest",
      "seed": 6,
      "team_name": "S. Carolina",
      "logo_url": "logos/south-carolina.svg"
    },
    {
      "id": "team_58",
      "region": "Midwest",
      "seed": 11,
      "team_name": "Oregon",
      "logo_url": "logos/oregon.svg"
    },
    {
      "id": "team_59",
      "region": "Midwest",
      "seed": 3,
      "team_name": "Creighton",
      "logo_url": "logos/creighton.svg"
    },
    {
      "id": "team_60",
      "region": "Midwest",
      "seed": 14,
      "team_name": "Akron",
      "logo_url": "logos/akron.svg"
    },
	{
      "id": "team_61",
      "region": "Midwest",
      "seed": 7,
      "team_name": "Texas",
      "logo_url": "logos/texas.svg"
    },
    {
      "id": "team_62",
      "region": "Midwest",
      "seed": 10,
      "team_name": "Colorado St.",
      "logo_url": "logos/colorado-st.svg"
    },
    {
      "id": "team_63",
      "region": "Midwest",
      "seed": 2,
      "team_name": "Tennessee",
      "logo_url": "logos/tennessee.svg"
    },
    {
      "id": "team_64",
      "region": "Midwest",
      "seed": 15,
      "team_name": "Saint Peter's",
      "logo_url": "logos/st-peters.svg"
    }
  ]
};

function drawBracketLine(game1, game2, variant) {
  const bracketContainer = document.querySelector('.bracket_container');
  
  const rect1 = game1.getBoundingClientRect();
  const rect2 = game2.getBoundingClientRect();
  const containerRect = bracketContainer.getBoundingClientRect();
  
  let startX, startY, endX, endY;

  switch (variant) {
    case 'right-down':
      startX = ((rect1.right - containerRect.left) / containerRect.width) * 100;
      startY = ((rect1.top + rect1.height / 2 - containerRect.top) / containerRect.height) * 100;
      endX = ((rect2.left + rect2.width / 2 - containerRect.left) / containerRect.width) * 100;
      endY = ((rect2.top - containerRect.top) / containerRect.height) * 100;
	  drawSVGLine(`${startX}%`, `${startY}%`, `${endX}%`, `${startY}%`, '#ccc', 'square', 'square', '1');
      drawSVGLine(`${endX}%`, `${startY}%`, `${endX}%`, `${endY}%`, '#ccc', 'square', 'square', '1');
      break;
      
    case 'left-down':
      startX = ((rect1.left - containerRect.left) / containerRect.width) * 100;
      startY = ((rect1.top + rect1.height / 2 - containerRect.top) / containerRect.height) * 100;
      endX = ((rect2.left + rect2.width / 2 - containerRect.left) / containerRect.width) * 100;
      endY = ((rect2.top - containerRect.top) / containerRect.height) * 100;
	  drawSVGLine(`${startX}%`, `${startY}%`, `${endX}%`, `${startY}%`, '#ccc', 'square', 'square', '1');
      drawSVGLine(`${endX}%`, `${startY}%`, `${endX}%`, `${endY}%`, '#ccc', 'square', 'square', '1');
      break;

    case 'right-up':
      startX = ((rect1.right - containerRect.left) / containerRect.width) * 100;
      startY = ((rect1.top + rect1.height / 2 - containerRect.top) / containerRect.height) * 100;
      endX = ((rect2.left + rect2.width / 2 - containerRect.left) / containerRect.width) * 100;
      endY = ((rect2.bottom - containerRect.top) / containerRect.height) * 100;
	  drawSVGLine(`${startX}%`, `${startY}%`, `${endX}%`, `${startY}%`, '#ccc', 'square', 'square', '1');
      drawSVGLine(`${endX}%`, `${startY}%`, `${endX}%`, `${endY}%`, '#ccc', 'square', 'square', '1');
      break;

    case 'left-up':
      startX = ((rect1.left - containerRect.left) / containerRect.width) * 100;
      startY = ((rect1.top + rect1.height / 2 - containerRect.top) / containerRect.height) * 100;
      endX = ((rect2.left + rect2.width / 2 - containerRect.left) / containerRect.width) * 100;
      endY = ((rect2.bottom - containerRect.top) / containerRect.height) * 100;
	  drawSVGLine(`${startX}%`, `${startY}%`, `${endX}%`, `${startY}%`, '#ccc', 'square', 'square', '1');
      drawSVGLine(`${endX}%`, `${startY}%`, `${endX}%`, `${endY}%`, '#ccc', 'square', 'square', '1');
      break;

    case 'right':
      startX = ((rect1.right - containerRect.left) / containerRect.width) * 100;
      startY = ((rect1.top + rect1.height / 2 - containerRect.top) / containerRect.height) * 100;
      midX = ((rect1.right + rect2.left) / 2 - containerRect.left) / containerRect.width * 100;
      midY = ((rect2.top + rect2.height / 4 - containerRect.top) / containerRect.height) * 100;
      endX = ((rect2.left - containerRect.left) / containerRect.width) * 100;
      drawSVGLine(`${startX}%`, `${startY}%`, `${midX}%`, `${startY}%`, '#ccc', 'square', 'square', '1');
      drawSVGLine(`${midX}%`, `${startY}%`, `${midX}%`, `${midY}%`, '#ccc', 'square', 'square', '1');
      drawSVGLine(`${midX}%`, `${midY}%`, `${endX}%`, `${midY}%`, '#ccc', 'square', 'square', '1');
      break;

    case 'left':
      startX = ((rect1.left - containerRect.left) / containerRect.width) * 100;
      startY = ((rect1.top + rect1.height / 2 - containerRect.top) / containerRect.height) * 100;
      midX = ((rect1.left + rect2.right) / 2 - containerRect.left) / containerRect.width * 100;
      midY = ((rect2.top + (3 * rect2.height) / 4 - containerRect.top) / containerRect.height) * 100;
      endX = ((rect2.right - containerRect.left) / containerRect.width) * 100;
      drawSVGLine(`${startX}%`, `${startY}%`, `${midX}%`, `${startY}%`, '#ccc', 'square', 'square', '1');
      drawSVGLine(`${midX}%`, `${startY}%`, `${midX}%`, `${midY}%`, '#ccc', 'square', 'square', '1');
      drawSVGLine(`${midX}%`, `${midY}%`, `${endX}%`, `${midY}%`, '#ccc', 'square', 'square', '1');
      break;
    
    default:
      console.error('Invalid variant specified');
      return;
  }
}

function drawSVGLine(x1, y1, x2, y2, color, lineJoin, lineCap, strokeWidth) {
  const svg = document.querySelector('.bracket_lines');
  const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
  
  line.setAttribute('x1', x1);
  line.setAttribute('y1', y1);
  line.setAttribute('x2', x2);
  line.setAttribute('y2', y2);
  line.setAttribute('stroke', color);
  line.setAttribute('stroke-width', strokeWidth);
  line.setAttribute('stroke-linejoin', lineJoin);
  line.setAttribute('stroke-linecap', lineCap);
  
  svg.appendChild(line);
}

function drawAllBracketLines() {
  const game = {};

  for (let i = 1; i <= 67; i++) {
    const gameId = i.toString().padStart(2, '0');
    game[`${gameId}`] = document.querySelector(`#game_container_${gameId}`);
  }
  
  drawBracketLine(game['01'], game['33'], 'right-down');
  drawBracketLine(game['02'], game['33'], 'right-up');
  drawBracketLine(game['03'], game['34'], 'right-down');
  drawBracketLine(game['04'], game['34'], 'right-up');
  drawBracketLine(game['05'], game['35'], 'right-down');
  drawBracketLine(game['06'], game['35'], 'right-up');
  drawBracketLine(game['07'], game['36'], 'right-down');
  drawBracketLine(game['08'], game['36'], 'right-up');
  drawBracketLine(game['09'], game['37'], 'right-down');
  drawBracketLine(game['10'], game['37'], 'right-up');
  drawBracketLine(game['11'], game['38'], 'right-down');
  drawBracketLine(game['12'], game['38'], 'right-up');
  drawBracketLine(game['13'], game['39'], 'right-down');
  drawBracketLine(game['14'], game['39'], 'right-up');
  drawBracketLine(game['15'], game['40'], 'right-down');
  drawBracketLine(game['16'], game['40'], 'right-up');

  drawBracketLine(game['33'], game['49'], 'right-down');
  drawBracketLine(game['34'], game['49'], 'right-up');
  drawBracketLine(game['35'], game['50'], 'right-down');
  drawBracketLine(game['36'], game['50'], 'right-up');
  drawBracketLine(game['37'], game['51'], 'right-down');
  drawBracketLine(game['38'], game['51'], 'right-up');
  drawBracketLine(game['39'], game['52'], 'right-down');
  drawBracketLine(game['40'], game['52'], 'right-up');

  drawBracketLine(game['49'], game['57'], 'right-down');
  drawBracketLine(game['50'], game['57'], 'right-up');
  drawBracketLine(game['51'], game['58'], 'right-down');
  drawBracketLine(game['52'], game['58'], 'right-up');

  drawBracketLine(game['57'], game['61'], 'right-down');
  drawBracketLine(game['58'], game['61'], 'right-up');
  
  drawBracketLine(game['17'], game['41'], 'right-down');
  drawBracketLine(game['18'], game['41'], 'right-up');
  drawBracketLine(game['19'], game['42'], 'right-down');
  drawBracketLine(game['20'], game['42'], 'right-up');
  drawBracketLine(game['21'], game['43'], 'right-down');
  drawBracketLine(game['22'], game['43'], 'right-up');
  drawBracketLine(game['23'], game['44'], 'right-down');
  drawBracketLine(game['24'], game['44'], 'right-up');
  drawBracketLine(game['25'], game['45'], 'right-down');
  drawBracketLine(game['26'], game['45'], 'right-up');
  drawBracketLine(game['27'], game['46'], 'right-down');
  drawBracketLine(game['28'], game['46'], 'right-up');
  drawBracketLine(game['29'], game['47'], 'right-down');
  drawBracketLine(game['30'], game['47'], 'right-up');
  drawBracketLine(game['31'], game['48'], 'right-down');
  drawBracketLine(game['32'], game['48'], 'right-up');

  drawBracketLine(game['41'], game['53'], 'right-down');
  drawBracketLine(game['42'], game['53'], 'right-up');
  drawBracketLine(game['43'], game['54'], 'right-down');
  drawBracketLine(game['44'], game['54'], 'right-up');
  drawBracketLine(game['45'], game['55'], 'right-down');
  drawBracketLine(game['46'], game['55'], 'right-up');
  drawBracketLine(game['47'], game['56'], 'right-down');
  drawBracketLine(game['48'], game['56'], 'right-up');

  drawBracketLine(game['53'], game['59'], 'right-down');
  drawBracketLine(game['54'], game['59'], 'right-up');
  drawBracketLine(game['55'], game['60'], 'right-down');
  drawBracketLine(game['56'], game['60'], 'right-up');

  drawBracketLine(game['59'], game['62'], 'right-down');
  drawBracketLine(game['60'], game['62'], 'right-up');
  
  drawBracketLine(game['61'], game['63'], 'right');
  drawBracketLine(game['62'], game['63'], 'left');
  
  /*drawBracketLine(game['64'], game[''], 'up');
  drawBracketLine(game['65'], game[''], 'up');
  drawBracketLine(game['66'], game[''], 'up');
  drawBracketLine(game['67'], game[''], 'up');*/
}

function initializeRound1TeamInfo(data) {
  const teams = data.teams;
  
  const idMapping = {
    "team_01": "game_01_top",
    "team_02": "game_01_bot",
    "team_03": "game_02_top",
    "team_04": "game_02_bot",
    "team_05": "game_03_top",
    "team_06": "game_03_bot",
    "team_07": "game_04_top",
    "team_08": "game_04_bot",
    "team_09": "game_05_top",
    "team_10": "game_05_bot",
    "team_11": "game_06_top",
    "team_12": "game_06_bot",
    "team_13": "game_07_top",
    "team_14": "game_07_bot",
    "team_15": "game_08_top",
    "team_16": "game_08_bot",
    "team_17": "game_09_top",
    "team_18": "game_09_bot",
    "team_19": "game_10_top",
    "team_20": "game_10_bot",
    "team_21": "game_11_top",
    "team_22": "game_11_bot",
    "team_23": "game_12_top",
    "team_24": "game_12_bot",
    "team_25": "game_13_top",
    "team_26": "game_13_bot",
    "team_27": "game_14_top",
    "team_28": "game_14_bot",
    "team_29": "game_15_top",
    "team_30": "game_15_bot",
    "team_31": "game_16_top",
    "team_32": "game_16_bot",
    "team_33": "game_17_top",
    "team_34": "game_17_bot",
    "team_35": "game_18_top",
    "team_36": "game_18_bot",
    "team_37": "game_19_top",
    "team_38": "game_19_bot",
    "team_39": "game_20_top",
    "team_40": "game_20_bot",
    "team_41": "game_21_top",
    "team_42": "game_21_bot",
    "team_43": "game_22_top",
    "team_44": "game_22_bot",
    "team_45": "game_23_top",
    "team_46": "game_23_bot",
    "team_47": "game_24_top",
    "team_48": "game_24_bot",
    "team_49": "game_25_top",
    "team_50": "game_25_bot",
    "team_51": "game_26_top",
    "team_52": "game_26_bot",
    "team_53": "game_27_top",
    "team_54": "game_27_bot",
    "team_55": "game_28_top",
    "team_56": "game_28_bot",
    "team_57": "game_29_top",
    "team_58": "game_29_bot",
    "team_59": "game_30_top",
    "team_60": "game_30_bot",
    "team_61": "game_31_top",
    "team_62": "game_31_bot",
    "team_63": "game_32_top",
    "team_64": "game_32_bot"
  };

  teams.forEach(team => {
    const mappedId = idMapping[team.id];
    const teamContainer = document.getElementById(mappedId);
    if (teamContainer) {
      const logoContainer = teamContainer.querySelector('.logo_container');
      const seedContainer = teamContainer.querySelector('.seed');
      const teamNameContainer = teamContainer.querySelector('.team_name');
      const emojiContainer = teamContainer.querySelector('.emoji');

      if (logoContainer) {
        logoContainer.style.backgroundImage = `url('./${team.logo_url}')`;
        logoContainer.style.backgroundSize = 'contain';
        logoContainer.style.backgroundRepeat = 'no-repeat';
      }
      if (seedContainer) {
        seedContainer.textContent = team.seed;
      }
      if (teamNameContainer) {
        teamNameContainer.textContent = team.team_name;
      }
      if (emojiContainer) {
        emojiContainer.textContent = '';
      }
    }
  });
}

window.onload = function() {
  initializeRound1TeamInfo(teamData);
  drawAllBracketLines();
};
